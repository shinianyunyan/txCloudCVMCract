重置实例密码
最近更新时间：2025-11-18 01:18:13

我的收藏
本页目录：
1. 接口描述
2. 输入参数
3. 输出参数
4. 示例
示例1 重置一个Linux/Windows实例的密码
5. 开发者资源
腾讯云 API 平台
API Inspector
SDK
命令行工具
6. 错误码
1. 接口描述
接口请求域名： cvm.tencentcloudapi.com 。

本接口 (ResetInstancesPassword) 用于将实例操作系统的密码重置为用户指定的密码。

*如果是修改系统管理员密码：实例的操作系统不同，管理员账号也会不一样(Windows为Administrator，Ubuntu为ubuntu，其它系统为root)。

重置处于运行中状态的实例密码，需要设置关机参数ForceStop为TRUE。如果没有显式指定强制关机参数，则只有处于关机状态的实例才允许执行重置密码操作。
支持批量操作。将多个实例操作系统的密码重置为相同的密码。每次请求批量实例的上限为100。
实例操作结果可以通过调用 DescribeInstances 接口查询，如果实例的最新操作状态(LatestOperationState)为“SUCCESS”，则代表操作成功。
默认接口请求频率限制：10次/秒。

推荐使用 API Explorer
点击调试
API Explorer 提供了在线调用、签名验证、SDK 代码生成和快速检索接口等能力。您可查看每次调用的请求内容和返回结果以及自动生成 SDK 调用示例。
2. 输入参数
以下请求参数列表仅列出了接口请求参数和部分公共参数，完整公共参数列表见 公共请求参数。

参数名称	必选	类型	描述
Action	是	String	公共参数，本接口取值：ResetInstancesPassword。
Version	是	String	公共参数，本接口取值：2017-03-12。
Region	是	String	公共参数，详见产品支持的 地域列表。
InstanceIds.N	是	Array of String	一个或多个待操作的实例ID。可通过DescribeInstances API返回值中的InstanceId获取。每次请求允许操作的实例数量上限是100。
示例值：["ins-r8hr2upy","ins-5d8a23rs"]
Password	是	String	重置后的实例登录密码。不同操作系统类型密码复杂度限制不一样，具体如下：Linux 实例密码必须8-30位，推荐使用12位以上密码，不能以“/”开头，至少包含以下字符中的三种不同字符，字符种类：
小写字母：[a-z]
大写字母：[A-Z]
数字：0-9
特殊字符： ()`~!@#$%^&*-+=_|{}[]:;'<>,.?/Windows 实例密码必须12~30位，不能以“/”开头且不包括用户名，至少包含以下字符中的三种不同字符
小写字母：[a-z]
大写字母：[A-Z]
数字： 0-9
特殊字符：()`~!@#$%^&*-+=_|{}[]:;' <>,.?/
如果实例即包含 Linux 实例又包含 Windows 实例，则密码复杂度限制按照 Windows 实例的限制。

示例值：abc123ABC!@#
UserName	否	String	待重置密码的实例操作系统的用户名。不得超过64个字符。
示例值：asdc21
ForceStop	否	Boolean	是否对运行中的实例选择强制关机。建议对运行中的实例先手动关机，然后再重置用户密码。取值范围：
true：表示在正常关机失败后进行强制关机
false：表示在正常关机失败后不进行强制关机
默认取值：false。

强制关机的效果等同于关闭物理计算机的电源开关。强制关机可能会导致数据丢失或文件系统损坏，请仅在服务器不能正常关机时使用。
示例值：true
3. 输出参数
参数名称	类型	描述
RequestId	String	唯一请求 ID，由服务端生成，每次请求都会返回（若请求因其他原因未能抵达服务端，则该次请求不会获得 RequestId）。定位问题时需要提供该次请求的 RequestId。
4. 示例
示例1 重置一个Linux/Windows实例的密码
重置一个Linux/Windows实例的密码，之后您可利用此密码登录实例

输入示例
POST / HTTP/1.1
Host: cvm.tencentcloudapi.com
Content-Type: application/json
X-TC-Action: ResetInstancesPassword
<公共请求参数>

{
    "InstanceIds": [
        "ins-r8hr2upy",
        "ins-5d8a23rs"
    ],
    "Password": "abc123ABC!@#",
    "ForceStop": false
}
输出示例
{
    "Response": {
        "RequestId": "6ef60bec-0242-43af-bb20-270359fb54a7"
    }
}
5. 开发者资源
腾讯云 API 平台
腾讯云 API 平台 是综合 API 文档、错误码、API Explorer 及 SDK 等资源的统一查询平台，方便您从同一入口查询及使用腾讯云提供的所有 API 服务。

API Inspector
用户可通过 API Inspector 查看控制台每一步操作关联的 API 调用情况，并自动生成各语言版本的 API 代码，也可前往 API Explorer 进行在线调试。

SDK
云 API 3.0 提供了配套的开发工具集（SDK），支持多种编程语言，能更方便的调用 API。

Tencent Cloud SDK 3.0 for Python: CNB, GitHub, Gitee
Tencent Cloud SDK 3.0 for Java: CNB, GitHub, Gitee
Tencent Cloud SDK 3.0 for PHP: CNB, GitHub, Gitee
Tencent Cloud SDK 3.0 for Go: CNB, GitHub, Gitee
Tencent Cloud SDK 3.0 for Node.js: CNB, GitHub, Gitee
Tencent Cloud SDK 3.0 for .NET: CNB, GitHub, Gitee
Tencent Cloud SDK 3.0 for C++: CNB, GitHub, Gitee
Tencent Cloud SDK 3.0 for Ruby: CNB, GitHub, Gitee
命令行工具
Tencent Cloud CLI 3.0
6. 错误码
以下仅列出了接口业务逻辑相关的错误码，其他错误码详见 公共错误码。

错误码	描述
FailedOperation.InvalidInstanceApplicationRole	不支持操作的applicationRole实例
InternalServerError	操作内部错误。
InvalidInstance.NotSupported	不被支持的实例。
InvalidInstanceId.Malformed	无效实例ID。指定的实例ID格式错误。例如实例ID长度错误ins-1122。
InvalidInstanceId.NotFound	没有找到相应实例。
InvalidParameterValue	参数取值错误。
InvalidParameterValue.InstanceIdMalformed	实例ID不合要求，请提供规范的实例ID，类似ins-xxxxxxxx，字母x代表小写字符或数字。
InvalidParameterValue.InvalidPassword	无效密码。指定的密码不符合密码复杂度限制。例如密码长度不符合限制等。
InvalidParameterValue.LimitExceeded	参数值数量超过限制。
InvalidParameterValue.TooLong	无效参数值。参数值太长。
MissingParameter	缺少参数错误。
MutexOperation.TaskRunning	同样的任务正在运行。
OperationDenied.InstanceOperationInProgress	实例正在执行其他操作，请稍后再试。
UnauthorizedOperation.MFAExpired	您无法进行当前操作，请确认多因子认证（MFA）是否失效。
UnauthorizedOperation.MFANotFound	没有权限进行此操作，请确认是否存在多因子认证（MFA）。
UnsupportedOperation.InstanceReinstallFailed	当前实例为重装系统失败状态，不支持此操作；推荐您再次重装系统，也可以销毁/退还实例或提交工单
UnsupportedOperation.InstanceStateEnterRescueMode	请求不支持进入救援模式的实例
UnsupportedOperation.InstanceStateExitRescueMode	请求不支持正在退出救援模式的实例
UnsupportedOperation.InstanceStateFreezing	操作不支持已冻结的实例。
UnsupportedOperation.InstanceStateIsolating	请求不支持正在隔离状态的实例。
UnsupportedOperation.InstanceStatePending	请求不支持创建未完成的实例
UnsupportedOperation.InstanceStateRebooting	请求不支持正在重启的实例
UnsupportedOperation.InstanceStateRescueMode	请求不支持救援模式的实例
UnsupportedOperation.InstanceStateRunning	请求不支持开机状态的实例
UnsupportedOperation.InstanceStateServiceLiveMigrate	不支持正在服务迁移的实例，请稍后再试
UnsupportedOperation.InstanceStateShutdown	请求不支持隔离状态的实例
UnsupportedOperation.InstanceStateStarting	实例开机中，不允许该操作。
UnsupportedOperation.InstanceStateStopping	请求不支持正在关机的实例
UnsupportedOperation.InstanceStateTerminating	请求不支持正在销毁的实例
UnsupportedOperation.SpecialInstanceType	请求不支持特殊机型的实例
UnsupportedOperation.StoppedModeStopCharging	不支持关机不收费特性
